<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formulario de Empleado</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="View/CSS/Estilos.css">
  <link rel="stylesheet" href="View/CSS/bootstrap.min.css">
  <link rel="stylesheet" href="https://necolas.github.io/normalize.css/8.0.1/normalize.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.27.0/moment-with-locales.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"></script>
  <script src="https://unpkg.com/jspdf-autotable@3.5.9/dist/jspdf.plugin.autotable.js"></script>


  <!--BOOTSTRAP-->

  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</head>


<style>
  .modal-lg {
    max-width: 80% !important;
}
</style>

<body>
  <main>
    <form action="" class="formulario" id="formulario" onsubmit="return false">

      <!--Grupo Nombre-->
      <div class="grupo__formulario" id="grupo__nombre">
        <label for="nombre" class="label__formulario">Nombres</label>
        <div class="formulario__grupo__input">
          <input type="text" class="formulario__input" name="nombre" id="nombre" placeholder="Ej. Oscar Alberto">
          <i class="formulario__validar-estado fas fa-times-circle"></i>
        </div>
        <p class="formulario__input-error">El nombre debe contener al menos 3 dígitos. Solo se permite Letras y
          Espacios.</p>
      </div>

      <!--Grupo Apellido-->
      <div class="grupo__formulario" id="grupo__apellido">
        <label for="apellido" class="label__formulario">Apellidos</label>
        <div class="formulario__grupo__input">
          <input type="text" class="formulario__input" name="apellido" id="apellido"
            placeholder="Ej. Castaneda Villalta">
          <i class="formulario__validar-estado fas fa-times-circle"></i>
        </div>
        <p class="formulario__input-error">El apellido debe contener al menos 3 dígitos. Solo se permite Letras y
          Espacios.</p>
      </div>

      <!--Grupo Telefono-->
      <div class="grupo__formulario" id="grupo__telefono">
        <label for="telefono" class="label__formulario">Telefono</label>
        <div class="formulario__grupo__input">
          <input type="text" class="formulario__input" name="telefono" id="telefono" placeholder="Ej. 7423-9876">
          <i class="formulario__validar-estado fas fa-times-circle"></i>
        </div>
        <p class="formulario__input-error">El Teléfono debe contener 8 dígitos</p>
      </div>

      <!--Grupo Correo-->
      <div class="grupo__formulario" id="grupo__correo">
        <label for="correo" class="label__formulario">Correo</label>
        <div class="formulario__grupo__input">
          <input type="text" class="formulario__input" name="correo" id="correo" placeholder="correo@correo.com">
          <i class="formulario__validar-estado fas fa-times-circle"></i>
        </div>
        <p class="formulario__input-error">El correo solo puede contener letras, números, puntos, guiones, y guión bajo
        </p>
      </div>

      <!--Grupo Nombre Empresa-->
      <div class="grupo__formulario" id="grupo__empresa">
        <label for="empresa" class="label__formulario">Nombre de la Empresa</label>
        <div class="formulario__grupo__input">
          <input type="text" class="formulario__input" name="empresa" id="empresa" placeholder="Nombre de la Empresa">
          <i class="formulario__validar-estado fas fa-times-circle"></i>
        </div>
        <p class="formulario__input-error">El nombre de la Empresa solo debe contener Letras y Espacios</p>
      </div>

      <!--Grupo DUI-->
      <div class="grupo__formulario" id="grupo__dui">
        <label for="dui" class="label__formulario">DUI</label>
        <div class="formulario__grupo__input">
          <input type="text" class="formulario__input" name="dui" id="dui" placeholder="08653186-9">
          <i class="formulario__validar-estado fas fa-times-circle"></i>
        </div>
        <p class="formulario__input-error">El DUI debe contener 9 dígitos. (Solo números)</p>
      </div>

      <!--Grupo NIT-->
      <div class="grupo__formulario" id="grupo__nit">
        <label for="nit" class="label__formulario">NIT</label>
        <div class="formulario__grupo__input">
          <input type="text" class="formulario__input" name="nit" id="nit" placeholder="98156307531753">
          <i class="formulario__validar-estado fas fa-times-circle"></i>
        </div>
        <p class="formulario__input-error">EL NIT debe contener 14 dígitos. (Sólo números)</p>
      </div>

      <!--Grupo Puesto -->
      <div class="grupo__formulario" id="grupo__puesto">
        <label for="puesto" class="label__formulario">Puesto del Empleado</label>
        <div class="formulario__grupo__input">
          <input type="text" class="formulario__input" name="puesto" id="puesto" placeholder="Puesto del Empleado">
          <i class="formulario__validar-estado fas fa-times-circle"></i>
        </div>
        <p class="formulario__input-error">El puesto del Empleado solo debe contener Letras y Espacios</p>
      </div>

      <!--Grupo Salario-->
      <div class="grupo__formulario" id="grupo__salario">
        <label for="correo" class="label__formulario">Salario</label>
        <div class="formulario__grupo__input">
          <input type="text" class="formulario__input" name="salario" id="salario" placeholder="Ej. 1500.00">
          <i class="formulario__validar-estado fas fa-times-circle"></i>
        </div>
        <p class="formulario__input-error">El salario solo debe contener números
        </p>
      </div>

      <!--Grupo Tiempo laburando-->
      <div class="grupo__formulario" id="grupo__tiempo_laburando">
        <label for="empresa" class="label__formulario">Tiempo Laborando</label>
        <div class="formulario__grupo__input">
          <select name="years" class="formulario__input" id="years" name="empresa" id="empresa">
            <option class="option_value" value="option_value">1 año a 3 años</option>
            <option class="option_value" value="option_value">3 años a 10 años</option>
            <option class="option_value" value="option_value">10 años a mas </option>
          </select>
          <i class="formulario__validar-estado fas fa-times-circle"></i>
        </div>
        <p class="formulario__input-error">El nombre de la Empresa solo debe contener Letras y Espacios</p>
      </div>

      <!--Mensaje Advertencia-->
      <div class="mensaje" id="mensaje">
        <p>
          <i class="fas fa-exclamation-triangle"></i><b> Error:</b>Todos los campos son requeridos
        </p>
      </div>
      <br>
      <div class="grupo__formulario__btn-submit">
        <button type="submit" class="formulario__btn" value="calcular"
          onclick="renta(); Remuneracion(); calculos(); setTablePDF()">Enviar</button>
      </div>
    </form>

  </main>

  <!-- formulario de diego -->
  <div class="container" style="  margin: auto;
  width: 100%;
  padding: 30px;">
    <div class="row">

      <table  class="table renta_mensual col-md-5 mx-md-5 col-sm-12 my-sm-5">
        <thead class="thead-dark">
          <tr>
            <th scope="col">Tipo</th>
            <th scope="col">Monto</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Salario Mensual</td>
            <td id="salarioMensual">$ 0</td>
          </tr>
          <tr class="bg-dark" style="color: white ; font-weight: bold;">
            <td class="Deduccion">Deducción</td>
            <td id="deduccion">Monto</td>
          </tr>
          <tr>
            <td>AFP: 7.25%</td>
            <td id="AFPCalculado">$ 0</td>
          </tr>
          <tr>
            <td>Deduccion ISSS: 3%</td>
            <td id="ISSSCalculado">$ 0</td>
          </tr>
          <tr>
            <td class="Total">Total</td>
            <td id="TotalCalculado">$ 0</td>
          </tr>
          <tr class="bg-dark" style="color: white; font-weight: bold;">
            <td>Determinación ISR</td>
            <td>Monto</td>
          </tr>
          <tr>
            <td class="Renta">Renta Imponible</td>
            <td id="RentaCalculado">$ 0</td>
          </tr>
        </tbody>
      </table>

      <!-- tabla de los calculos -->
      <table class="table calculos col-md-5 ml-md-5 col-sm-12 my-sm-5">
        <thead class="thead-dark">
          <tr>
            <th>Calculo de la Renta</th>
            <th>Monto</th>
          </tr>
        </thead>
        <tr>
          <td>Salario Base</td>
          <td id="salarioBase">$ 0</td>
        </tr>
        <tr>
          <td>Renta Imponible</td>
          <td id="RentaImponible">$ 0</td>
        </tr>
        <tr>
          <td>AFP</td>
          <td id="AFPTotal">$ 0</td>
        </tr>
        <tr>
          <td>ISSS</td>
          <td id="ISSSTotal">$ 0</td>
        </tr>
        <tr>
          <td>Impuesto sobre la Renta</td>
          <td id="Impuesto">$ 0</td>
        </tr>
        <!-- <tr>
                            <td>Descuento total</td>
                            <td id="descuento">$ 0</td>
                        </tr> -->
        <tr>
          <td>Salario líquido</td>
          <td id="salarioLiquido">$ 0</td>
        </tr>
      </table>

    </div>

    <!-- Tabla Renta Mensual -->
    <div class="row">
      <table  class="table remuneraciones col-sm-12 my-sm-5">
        <thead class="thead-dark">
          <tr>
            <th>Meses</th>
            <th>Remuneraciones</th>
            <th>Meses</th>
            <th>Remuneraciones</th>
          </tr>
        </thead>
       <tbody>
        <tr>
          <td>Enero</td>
          <td id="enero">$ 0</td>
          <td>Julio</td>
          <td id="julio">$ 0</td>
        </tr>
        <tr>
          <td>Febrero</td>
          <td id="febrero">$ 0</td>
          <td>Agosto</td>
          <td id="agosto">$ 0</td>
        </tr>
        <tr>
          <td>Marzo</td>
          <td id="marzo">$ 0</td>
          <td>Septiembre</td>
          <td id="setpiembre">$ 0</td>
        </tr>
        <tr>
          <td>Abril</td>
          <td id="abril">$ 0</td>
          <td>Octubre</td>
          <td id="octubre">$ 0</td>
        </tr>
        <tr>
          <td>Mayo</td>
          <td id="mayo">$ 0</td>
          <td>Noviembre</td>
          <td id="noviembre">$ 0</td>
        </tr>
        <tr>
          <td>Junio</td>
          <td id="junio">$ 0</td>
          <td>Diciembre</td>
          <td id="diciembre">$ 0</td>
        </tr>
        <tr class="badge-dark" style="color: white; font-weight: bold;">
          <td colspan="2">Total de todos los meses</td>
          <td colspan="2" id=total>$ 0</td>
        </tr>
       </tbody>
      </table>
      <!-- Tabla Renta Mensual -->
  </div>

    <div class="row">
      <table  class="table retenciones col-sm-12 my-sm-5">
        <thead class="thead-dark">
          <tr>
            <th>Meses</th>
            <th>Retenciones</th>
            <th>Meses</th>
            <th>Retenciones</th>
          </tr>
        </thead>
       <tbody>
        <tr>
          <td>Enero</td>
          <td id="eneroRT">$ 0</td>
          <td>Julio</td>
          <td id="julioRT">$ 0</td>
        </tr>
        <tr>
          <td>Febrero</td>
          <td id="febreroRT">$ 0</td>
          <td>Agosto</td>
          <td id="agostoRT">$ 0</td>
        </tr>
        <tr>
          <td>Marzo</td>
          <td id="marzoRT">$ 0</td>
          <td>Septiembre</td>
          <td id="setpiembreRT">$ 0</td>
        </tr>
        <tr>
          <td>Abril</td>
          <td id="abrilRT">$ 0</td>
          <td>Octubre</td>
          <td id="octubreRT">$ 0</td>
        </tr>
        <tr>
          <td>Mayo</td>
          <td id="mayoRT">$ 0</td>
          <td>Noviembre</td>
          <td id="noviembreRT">$ 0</td>
        </tr>
        <tr>
          <td>Junio</td>
          <td id="junioRT">$ 0</td>
          <td>Diciembre</td>
          <td id="diciembreRT">$ 0</td>
        </tr>
        <tr class="badge-dark" style="color: white; font-weight: bold;">
          <td colspan="2">Total de todos los meses</td>
          <td colspan="2" id="totalRT">$ 0</td>
        </tr>
       </tbody>
      </table>
    </div>


  </div>
  </div>
<!--DOWNLOAD THINGS ##############################################################-->


<!-- Button trigger modal -->


<div class="col text-center mb-5">
  <button type="button" class="btn btn-primary text-center" data-toggle="modal" data-target="#exampleModalCenter">
    Mostrar boleta de pago
  </button>
  &nbsp;
  <button type="button" class="btn btn-success text-center" data-toggle="modal" data-target="#tableTwp">
    Mostrar ISR
  </button>
</div>

<!-- Modal -->
<div class="modal fade"  id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered" style="width: 900px !important;" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Boleta de pago</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" >
      <table border="0" id="boletapago" >
        <tr>
          <th colspan="2" align="center">BOLETA DE PAGO</th>
        </tr>
        <tr>
          <td><strong>Empleador:</strong></td>
          <td>GOBIERNO</td>
          <tr>
            <td><strong>Empleado:</strong></td>
            <td><span class="showFullName"></span></td>
          </tr>
        </tr>
        <tr>
          <tr>
            <td><strong>UNIDAD:</strong></td>
            <td>LABORAL</td>
          </tr>
          <tr>
            <td><strong>MODO DE PAGO:</strong></td>
            <td>Depositò de banco</td>
          </tr>
          <tr>
            <td><strong>CARGO NOMINAL</strong></td>
            <td><span id="showCargo"></span></td>
            <td align="right"><strong>SALARIO</strong></td>
            <td align="right"><span class="showSalario"></span></td>
          </tr>
        </tr>
      </table>
      <table id="boletaResumen" class="table remuneraciones col-sm-12 my-sm-5">
        <thead class="thead-dark">
          <tr>
            <th>CONCEPTOS</th>
            <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </th>
            <th>HABERES</th>
            <th>DESCUENTOS</th>
          </tr>
        </thead>
       <tbody>
        <tr>
          <td>Sueldo Basico</td>
          <td></td>
          <td>$<span class="showSalario"></span></td>
          <td></td>
        </tr>
        <tr>
          <td>ISSS</td>
          <td></td>
          <td></td>
          <td><span class="ISSSCalculado"></span></td>
        </tr>
        <tr>
          <td>AFP</td>
          <td></td>
          <td></td>
          <td><span class="AFPCalculado"></span></td>
        </tr>
        <tr>
          <td>Impuesto sobre la Renta</td>
          <td></td>
          <td></td>
          <td><span class="Impuesto"></span></td>
        </tr>
        <tr>
          <td colspan="2">Total:</td>
          <td>$<span class="showSalario"></span></td>
          <td>$<span class="totalFullNoFake"></span></td>
        </tr>
        <tr>
          <td colspan="2"><span class="ntl"></span></td>
          <td>NETO A PAGAR</td>
          <td>$<span class="yaMerito"></span></td>
        </tr>
       </tbody>
      </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
        <button type="button" class="btn btn-primary" onclick="printVaucher()">Imprimir</button>
      </div>
    </div>
  </div>
</div>



<!--######~~~~~~~~~~~~~~~~~~~~~~~~########################################~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
<div class="modal fade"  id="tableTwp" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered" style="width: 900px !important;" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">ISR</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" >
      <table border="0" id="nuevaTabla">
        <tr>
          <th colspan="3" align="center">Modelo de constancia del ISR con base al art. 145 Codigo tributario</th>
        </tr>
        
       
        <tr>
          <td>Gobierno de El Salvador S.A de C.V</td>
          <td>NIT : <span class="showNit"></span></td>
        </tr><tr>
          <td><span id="fechaDefinitiva"></span>
          </td>
        </tr>
        <tr>
          <td colspan="4">
           A quien le interese para efectos de declaracion de impuestos sobre la renta, agente de seccion, hace constar que los ingresos generados por&nbsp;<span class="showFullName"></span> con N.I.T&nbsp; <span class="showNit"></span> Durante el perido comprendido de Enero a Diciembre del año <span id="showYear"></span>
          </td>
        </tr>
        <tr>
          <th>INGRESOS GRABADOS</th>
        </tr>
        <tr>
          <td >Salario mensual</td>
          <td>.............................................................</td>
          <td>$<span class="showSalario"></span></td>
        </tr>
        <tr>
          <td>AFP</td>
          <td>.............................................................</td>
          <td><span class="AFPCalculado"></span></td>
        </tr>
        <tr>
          <td>ISSS</td>
          <td>.............................................................</td>
          <td><span class="ISSSCalculado"></span></td>
        </tr>
        <tr>
          <td>Impuestos sobre la renta Recibido en el año</td>
          <td>.............................................................</td>
          <td><span class="totalRT"></span></td>
        </tr>
        <tr>
          <td>Aguinaldo</td>
          <td>.............................................................</td>
          <td><span id="aguinaldoBoleta"></span></td>
        </tr>
        <tr>
          <td>Total a devolver</td>
          <td>.............................................................</td>

          
          <td>$ 0.0</td>
        </tr>
      </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
        <button type="button" class="btn btn-primary" onclick="printTableTwoLadbd()">Imprimir</button>
      </div>
    </div>
  </div>
</div>
<!--######~~~~~~~~~~~~~~~~~~~~~~~~########################################~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->

  <script src="Model/JS/RemuneracionRetencion.js"></script>   
  <script src="Model/JS/generateTableForPDF.js"></script>
  <script src="Model/JS/lib/numberTotext.js"></script>
  <!-- <script src="Controller/JS/Formulario.js"></script> -->
  <script src="https://kit.fontawesome.com/2c36e9b7b1.js" crossorigin="anonymous"></script>


  


</body>

</html>


<script>
  
  $('#fechaDefinitiva').html(moment().locale('es').format('LLLL'));
  $('#showYear').html(moment().locale('es').format('YYYY'));
  function printVaucher() {
    var doc = new jsPDF() 
    doc.autoTable({html:"#boletapago"}); 
    doc.autoTable({html:"#boletaResumen"});
    doc.save();
  }

  function printTableTwoLadbd() {
    var doc = new jsPDF() 
    doc.autoTable({html:"#nuevaTabla"});
    doc.save();
  }
  </script>
